<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/DAME-FLAME-Python-Package/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/DAME-FLAME-Python-Package/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/DAME-FLAME-Python-Package/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/DAME-FLAME-Python-Package/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>FLAME | DAME-FLAME Python Package</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="FLAME" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="dame_flame.matching.FLAME The FLAME algorithm class" /> <meta property="og:description" content="dame_flame.matching.FLAME The FLAME algorithm class" /> <link rel="canonical" href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME" /> <meta property="og:url" content="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME" /> <meta property="og:site_name" content="DAME-FLAME Python Package" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-12-28T21:20:21-06:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME","datePublished":"2020-12-28T21:20:21-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/DAME-FLAME-Python-Package/content/logos/logo.svg"}},"headline":"FLAME","description":"dame_flame.matching.FLAME The FLAME algorithm class","dateModified":"2020-12-28T21:20:21-06:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">DAME-FLAME Python Package</div> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started/installation_example/" class="nav-list-link">Installation and Quickstart Example</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started/contributing_guide/" class="nav-list-link">Contributing Guide</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide" class="nav-list-link">User Guide</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Introduction" class="nav-list-link">Introduction to Causal Inference</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/to-match-or-not" class="nav-list-link">Whether to use Matching</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/documentation/user-guide/data-requirements" class="nav-list-link">Discrete Observation Requirement</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/documentation/user-guide/Getting-Matches" class="nav-list-link">Getting Matches</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects" class="nav-list-link">Treatment Effect Estimates</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Algorithm-Controls" class="nav-list-link">Algorithm Controls</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data" class="nav-list-link">Missing Data Handling</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation" class="nav-list-link">API Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/DAME" class="nav-list-link">DAME</a></li><li class="nav-list-item active"><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME" class="nav-list-link active">FLAME</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/" class="nav-list-link">Post Processing</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/matched-group" class="nav-list-link">Matched Group</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/ATE" class="nav-list-link">ATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/CATE" class="nav-list-link">CATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/ATT" class="nav-list-link">ATT</a> </li></ul></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/data-generating/" class="nav-list-link">Data Generating</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples" class="nav-list-link">Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/flame_vs_dame_quality/" class="nav-list-link">Comparing DAME and FLAME</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/early_stopping/" class="nav-list-link">Benefit to Early Stopping</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/exact_matching/" class="nav-list-link">Exact Matching Only</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/interpretability/" class="nav-list-link">Interpreting Covariate Importance</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/natality_experiment/" class="nav-list-link">Natality Experiment</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/FAQ" class="nav-list-link">FAQ and Vocabulary Guide</a></li></ul> </nav> <footer class="site-footer"> This package is created by the <a href="https://almost-matching-exactly.github.io">Almost Matching Exactly Lab</a>. Site based on the Jekyll theme <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>. Copyright Duke University, 2020. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAME-FLAME Python Package" aria-label="Search DAME-FLAME Python Package" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/almost-matching-exactly" class="site-button" rel="noopener noreferrer" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation">API Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>FLAME</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="dame_flamematchingflame"> <a href="#dame_flamematchingflame" class="anchor-heading" aria-labelledby="dame_flamematchingflame"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> dame_flame.matching.FLAME </h1> <p>The FLAME algorithm class</p> <div class="code-example"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">dame_flame</span><span class="p">.</span><span class="n">matching</span><span class="p">.</span><span class="n">FLAME</span><span class="p">(</span><span class="n">adaptive_weights</span><span class="o">=</span><span class="s">'ridge'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> 
         <span class="n">repeats</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">early_stop_iterations</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
         <span class="n">stop_unmatched_c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">early_stop_un_c_frac</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
         <span class="n">stop_unmatched_t</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">early_stop_un_t_frac</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
         <span class="n">early_stop_pe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">early_stop_pe_frac</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
         <span class="n">missing_indicator</span><span class="o">=</span><span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">missing_data_replace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
         <span class="n">missing_holdout_replace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">missing_holdout_imputations</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> 
         <span class="n">missing_data_imputations</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">want_pe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">want_bf</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>    
</code></pre></div> </div> </div> <div id="source" class="language-markdown highlighter-rouge"> <a class="number" href="#SourceCode"></a> <a href="https://github.com/almost-matching-exactly/DAME-FLAME-Python-Package/blob/master/dame_flame/matching.py#L189"> <h6> <u>Source Code</u> </h6> </a> </div> <p>This class creates the matches based on the FLAME “Fast Large-Scale Almost Matching Exactly” algorithm. It has built in support for stopping criteria and missing data handling.</p> <p>Read more in the <a href="../user-guide/Getting-Matches.html">User Guide</a></p> <h2 id="parameters"> <a href="#parameters" class="anchor-heading" aria-labelledby="parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parameters </h2> <div class="table-wrapper"><table> <thead> <tr> <th>Parameter Name</th> <th>Type</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>adaptive_weights</td> <td>{bool, ‘ridge’, ‘decisiontree’, ‘ridgeCV’, ‘decisiontreeCV’}</td> <td>‘ridge’</td> <td>The method used to decide what covariate set should be dropped next.</td> </tr> <tr> <td>alpha</td> <td>float</td> <td>0.1</td> <td>If adaptive_weights is set to ridge, this is the alpha for ridge regression.</td> </tr> <tr> <td>repeats</td> <td>bool</td> <td>True</td> <td>Whether or not units for whom a main matched has been found can be used again, and placed in an auxiliary matched group.</td> </tr> <tr> <td>verbose</td> <td>int: {0,1,2,3}</td> <td>2</td> <td>Style of printout while algorithm runs. If 0, no output. If 1, provides iteration number. If 2, provides iteration number and additional information on the progress of the matching at every 10th iteration. If 3, provides iteration number and additional information on the progress of the matching at every iteration</td> </tr> <tr> <td>early_stop_iterations</td> <td>int</td> <td>0</td> <td>If provided, a number of iterations after which to hard stop the algorithm.</td> </tr> <tr> <td>stop_unmatched_c</td> <td>bool</td> <td>False</td> <td>If True, then the algorithm terminates when there are no more control units to match.</td> </tr> <tr> <td>stop_unmatched_t</td> <td>bool</td> <td>False</td> <td>If True, then the algorithm terminates when there are no more treatment units to match.</td> </tr> <tr> <td>early_stop_un_c_frac</td> <td>float</td> <td>0.1</td> <td>Must be between 0.0 and 1.0. This provides a fraction of unmatched control units. When the threshold is met, the algorithm will stop iterating. For example, using an input dataset with 100 control units, the algorithm will stop when 10 control units are unmatched and 90 are matched (or earlier, depending on other stopping conditions).</td> </tr> <tr> <td>early_stop_un_t_frac</td> <td>float</td> <td>0.1</td> <td>Must be between 0.0 and 1.0. This provides a fraction of unmatched treatment units. When the threshold is met, the algorithm will stop iterating. For example, using an input dataset with 100 treatment units, the algorithm will stop when 10 control units are unmatched and 90 are matched (or earlier, depending on other stopping conditions).</td> </tr> <tr> <td>early_stop_pe</td> <td>bool</td> <td>False</td> <td>If this is true, then if the covariate set chosen for matching has a predictive error higher than the parameter early_stop_pe_frac, the algorithm will stop.</td> </tr> <tr> <td>early_stop_pe_frac</td> <td>float</td> <td>0.01</td> <td>If early_stop_pe is true, then if the covariate set chosen for matching has a predictive error higher than this value, the algorithm will stop.</td> </tr> <tr> <td>want_pe</td> <td>bool</td> <td>False</td> <td>If true, the output of the algorithm will include the predictive error of the covariate sets used for matching in each iteration.</td> </tr> <tr> <td>want_bf</td> <td>bool</td> <td>False</td> <td>If true, the output will include the balancing factor for each iteration.</td> </tr> <tr> <td>missing_indicator</td> <td>{character, integer, numpy.nan}</td> <td>numpy.nan</td> <td>This is the indicator for missing data in the dataset.</td> </tr> <tr> <td>missing_holdout_replace</td> <td>int: {0,1,2}</td> <td>0</td> <td>If 0, assume no missing holdout data and proceed. If 1, the algorithm excludes units with missing values from the holdout dataset. If 2, do MICE on holdout dataset. If this option is selected, it will be done for a number of iterations equal to missing_holdout_imputations.</td> </tr> <tr> <td>missing_data_replace</td> <td>int: {0,1,2,3}</td> <td>0</td> <td>If 0, assume no missing data in matching data and proceed. If 1, the algorithm does not match on units that have missing values. If 2, prevent all missing_indicator values from being matched on. If 3, do MICE on matching dataset. This is not recommended. If this option is selected, it will be done for a number of iterations equal to missing_data_imputations.</td> </tr> <tr> <td>missing_holdout_imputations</td> <td>int</td> <td>10</td> <td>If missing_holdout_replace=2, the number of imputations.</td> </tr> <tr> <td>missing_data_imputations</td> <td>int</td> <td>1</td> <td>If missing_data_replace=3, the number of imputations.</td> </tr> </tbody> </table></div> <h2 id="attributes"> <a href="#attributes" class="anchor-heading" aria-labelledby="attributes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attributes </h2> <div class="table-wrapper"><table> <thead> <tr> <th>Attribute Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>units_per_group</td> <td>Array</td> <td>This is an array of arrays. Each sub-array is a matched group, and each item in each sub-array is an int, indicating the unit in that matched group. If matching is done with <code class="language-plaintext highlighter-rouge">repeats=False</code> then no unit will appear more than once. If <code class="language-plaintext highlighter-rouge">repeats=True</code> then the first group in which a unit appears is its main matched group.</td> </tr> <tr> <td>df_units_and_covars_matched</td> <td>dataframe</td> <td>This is the resulting matches of FLAME. Each matched unit is in this array, and the covariates they were matched on have the value used to match. The covariates units were not matched on are indicated with a <code class="language-plaintext highlighter-rouge">*</code></td> </tr> <tr> <td>groups_per_unit</td> <td>Array</td> <td>The length of this is equal to the number of units in the input array. Each item in this array corresponds to the number of times that each item was matched. If matching is done with repeats=False, then this number will be either 0 or 1.</td> </tr> <tr> <td>bf_each_iter</td> <td>Array</td> <td>if <code class="language-plaintext highlighter-rouge">want_bf</code> parameter is True, this will contain the balancing factor of the chosen covariate set at each iteration</td> </tr> <tr> <td>pe_each_iter</td> <td>Array</td> <td>if <code class="language-plaintext highlighter-rouge">want_pe</code> parameter is True, this will contain the predictive error of the chosen covariate set at each iteration</td> </tr> </tbody> </table></div> <h2 id="quick-example"> <a href="#quick-example" class="anchor-heading" aria-labelledby="quick-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quick Example </h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">dame_flame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"dame_flame/data/sample.csv"</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">dame_flame</span><span class="p">.</span><span class="n">matching</span><span class="p">.</span><span class="n">FLAME</span><span class="p">()</span>
<span class="n">model</span><span class="p">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="c1">#&gt;    x1   x2   x3   x4
#&gt; 0   *   1    1    1     
#&gt; 2   *   *    1    1     
#&gt; 3   *   0    1    1     
</span></code></pre></div></div> <h2 id="methods"> <a href="#methods" class="anchor-heading" aria-labelledby="methods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Methods </h2> <div class="table-wrapper"><table> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">fit(self, holdout_data, treatment_col....)</code></td> <td>Provide self with holdout training data</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">predict(self, input_data...)</code></td> <td>Perform the match on the input data</td> </tr> </tbody> </table></div> <div class="code-example"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">__init__</span><span class="p">(</span><span class="n">adaptive_weights</span><span class="o">=</span><span class="s">'ridge'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">repeats</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">early_stop_iterations</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
<span class="n">stop_unmatched_c</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">early_stop_un_c_frac</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">stop_unmatched_t</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">early_stop_un_t_frac</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="n">early_stop_pe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">early_stop_pe_frac</span><span class="o">=</span><span class="mf">0.01</span>
<span class="n">missing_indicator</span><span class="o">=</span><span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">missing_data_replace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">missing_holdout_replace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
<span class="n">missing_holdout_imputations</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">missing_data_imputations</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">want_pe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">want_bf</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div> </div> </div> <div id="source" class="language-markdown highlighter-rouge"> <a class="number" href="#SourceCode"></a> <a href="https://github.com/almost-matching-exactly/DAME-FLAME-Python-Package/blob/master/dame_flame/matching.py#L71"> <h6> <u>Source Code</u> </h6> </a> </div> <p>Initialize self</p> <div class="code-example"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">holdout_data</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">treatment_column_name</span><span class="o">=</span><span class="s">'treated'</span><span class="p">,</span> <span class="n">outcome_column_name</span><span class="o">=</span><span class="s">'outcome'</span>
<span class="n">weight_array</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
</code></pre></div> </div> </div> <div id="source" class="language-markdown highlighter-rouge"> <a class="number" href="#SourceCode"></a> <a href="https://github.com/almost-matching-exactly/DAME-FLAME-Python-Package/blob/master/dame_flame/matching.py#L99"> <h6> <u>Source Code</u> </h6> </a> </div> <p>Provide self with holdout data</p> <div class="table-wrapper"><table> <thead> <tr> <th><code class="language-plaintext highlighter-rouge">fit</code> Parameter Name</th> <th>Type</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>holdout_data</td> <td>{string, dataframe, float, False }</td> <td>False</td> <td>This is the holdout training dataset. If a string is given, that should be the location of a CSV file to input. If a float between 0.0 and 1.0 is given, that corresponds the percent of the input dataset to randomly select for holdout data. If False, the holdout data is equal to the entire input data.</td> </tr> <tr> <td>treatment_column_name</td> <td>string</td> <td>“treated”</td> <td>This is the name of the column with a binary indicator for whether a row is a treatment or control unit.</td> </tr> <tr> <td>outcome_column_name</td> <td>string</td> <td>“outcome”</td> <td>This is the name of the column with the outcome variable of each unit.</td> </tr> <tr> <td>adaptive_weights</td> <td>{bool, “ridge”, “decisiontree”, “ridgeCV”, “decisiontreeCV”}</td> <td>“ridge”</td> <td>The method used to decide what covariate set should be dropped next.</td> </tr> <tr> <td>weight_array</td> <td>array</td> <td>optional</td> <td>If adaptive_weights = False, these are the weights to the covariates in input_data, for the non-adaptive version of FLAME. Must sum to 1. In this case, we do not use machine learning for the weights, they are manually entered as weight_array.</td> </tr> </tbody> </table></div> <div class="code-example"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">)</span>
</code></pre></div> </div> </div> <div id="source" class="language-markdown highlighter-rouge"> <a class="number" href="#SourceCode"></a> <a href="https://github.com/almost-matching-exactly/DAME-FLAME-Python-Package/blob/master/dame_flame/matching.py#L193"> <h6> <u>Source Code</u> </h6> </a> </div> <p>Perform match and return matches</p> <div class="table-wrapper"><table> <thead> <tr> <th><code class="language-plaintext highlighter-rouge">predict</code> Parameter Name</th> <th>Type</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>input_data</td> <td>{string, dataframe}</td> <td>Required Parameter</td> <td>The dataframe on which to perform the matching, or the location of the CSV with the dataframe</td> </tr> <tr> <td>C</td> <td>float</td> <td>0.1</td> <td>The tradeoff parameter between the balancing factor and the predictive error when deciding which covariates to match on</td> </tr> <tr> <td>pre_dame</td> <td>{bool, integer}</td> <td>False</td> <td>If an integer is provided, this is the number of iterations to run the FLAME algorithm for before switching to DAME, in order for a hybrid FLAME-DAME option.</td> </tr> </tbody> </table></div> <div class="table-wrapper"><table> <thead> <tr> <th><code class="language-plaintext highlighter-rouge">predict</code> Return</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Result</td> <td>Pandas dataframe of matched units and covariates matched on, with a “*” at each covariate that a unit did not use in matching</td> </tr> </tbody> </table></div> <div class="language-markdown highlighter-rouge"> <h4> Further Readings </h4> <br /> <a href="https://arxiv.org/abs/1707.06315"> Wang, Morucci, et al. <i>FLAME: A Fast Large-scale Almost Matching Exactly Approach to Causal Inference</i>. </a> </div> </div> </div> <div class="search-overlay"></div> </div> </body> </html> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
