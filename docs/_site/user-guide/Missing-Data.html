<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/DAME-FLAME-Python-Package/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/DAME-FLAME-Python-Package/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/DAME-FLAME-Python-Package/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/DAME-FLAME-Python-Package/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Missing Data Handling | DAME-FLAME Python Package</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Missing Data Handling" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Missing Data Handling" /> <meta property="og:description" content="Missing Data Handling" /> <link rel="canonical" href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data" /> <meta property="og:url" content="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data" /> <meta property="og:site_name" content="DAME-FLAME Python Package" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-12-22T00:47:26-06:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data","datePublished":"2020-12-22T00:47:26-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/DAME-FLAME-Python-Package/content/logos/logo.svg"}},"headline":"Missing Data Handling","description":"Missing Data Handling","dateModified":"2020-12-22T00:47:26-06:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/DAME-FLAME-Python-Package/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">DAME-FLAME Python Package</div> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started/installation_example/" class="nav-list-link">Installation and Quickstart Example</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started/contributing_guide/" class="nav-list-link">Contributing Guide</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation" class="nav-list-link">API Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/DAME" class="nav-list-link">DAME</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME" class="nav-list-link">FLAME</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/" class="nav-list-link">Post Processing</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/matched-group" class="nav-list-link">Matched Group</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/ATE" class="nav-list-link">ATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/CATE" class="nav-list-link">CATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/ATT" class="nav-list-link">ATT</a> </li></ul></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide" class="nav-list-link">User Guide</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Introduction" class="nav-list-link">Introduction to Causal Inference</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/to-match-or-not" class="nav-list-link">Whether to use Matching</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/documentation/user-guide/data-requirements" class="nav-list-link">Discrete Observation Requirement</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/documentation/user-guide/Getting-Matches" class="nav-list-link">Getting Matches</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects" class="nav-list-link">Treatment Effect Estimates</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Algorithm-Controls" class="nav-list-link">Algorithm Controls</a></li><li class="nav-list-item active"><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data" class="nav-list-link active">Missing Data Handling</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples" class="nav-list-link">Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/flame_vs_dame_quality/" class="nav-list-link">Comparing DAME and FLAME</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/early_stopping/" class="nav-list-link">Benefit to Early Stopping</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/exact_matching/" class="nav-list-link">Exact Matching Only</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/interpretability/" class="nav-list-link">Interpreting Covariate Importance</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/natality_experiment/" class="nav-list-link">Natality Experiment</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/FAQ" class="nav-list-link">FAQ and Vocabulary Guide</a></li></ul> </nav> <footer class="site-footer"> This package is created by the <a href="https://almost-matching-exactly.github.io">Almost Matching Exactly Lab</a>. Site based on the Jekyll theme <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>. Copyright Duke University, 2020. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAME-FLAME Python Package" aria-label="Search DAME-FLAME Python Package" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/almost-matching-exactly" class="site-button" rel="noopener noreferrer" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide">User Guide</a></li> <li class="breadcrumb-nav-list-item"><span>Missing Data Handling</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="missing-data-handling"> <a href="#missing-data-handling" class="anchor-heading" aria-labelledby="missing-data-handling"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Missing Data Handling </h1> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#introduction-to-missing-data-problems-in-matching" id="markdown-toc-introduction-to-missing-data-problems-in-matching">Introduction to Missing Data Problems in Matching</a></li> <li><a href="#determining-which-missing-data-method-is-right-for-you" id="markdown-toc-determining-which-missing-data-method-is-right-for-you">Determining Which Missing Data Method Is Right For You</a> <ol> <li><a href="#missing-values-in-the-input-data" id="markdown-toc-missing-values-in-the-input-data">Missing values in the input data</a></li> <li><a href="#missing-values-in-the-holdout-data" id="markdown-toc-missing-values-in-the-holdout-data">Missing values in the holdout data</a></li> </ol> </li> <li><a href="#further-details-on-mice-imputation" id="markdown-toc-further-details-on-mice-imputation">Further Details on MICE imputation</a></li> </ol> </details> <h2 id="introduction-to-missing-data-problems-in-matching"> <a href="#introduction-to-missing-data-problems-in-matching" class="anchor-heading" aria-labelledby="introduction-to-missing-data-problems-in-matching"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction to Missing Data Problems in Matching </h2> <p>Missing data is a complicated issue in matching problems. Imputing missing values on datasets is possible, but matches become less interpretable when matching on imputed values, in that it is more difficult to discern why a match was recommended by the matching algorithm.</p> <p>The DAME and FLAME algorithms rely on covariate matching, so the <code class="language-plaintext highlighter-rouge">DAME-FLAME</code> package is able to take advantage of this and allows users to match on raw values on data sets with missing data without imputing any data. The <code class="language-plaintext highlighter-rouge">DAME-FLAME</code> package also provides options for imputing data.</p> <h2 id="determining-which-missing-data-method-is-right-for-you"> <a href="#determining-which-missing-data-method-is-right-for-you" class="anchor-heading" aria-labelledby="determining-which-missing-data-method-is-right-for-you"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Determining Which Missing Data Method Is Right For You </h2> <h3 id="missing-values-in-the-input-data"> <a href="#missing-values-in-the-input-data" class="anchor-heading" aria-labelledby="missing-values-in-the-input-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Missing values in the input data </h3> <p>We recommend users set the parameter <code class="language-plaintext highlighter-rouge">missing_data_replace=2</code>, where units that have missing values are still matched on, but the covariates they are missing are not used in computing their match. In this option, the underlying algorithm works by replacing each missing value with a unique value, so that in the matching procedure, those covariates simply don’t have a match because their values are not equl to any other values. It is not recommended to use MICE to impute on the matching dataset, as this would be very slow.</p> <p>Users also have the option of imputing their data through any data imputation method of their choice, and then using their imputed dataset as the input data.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Method</th> <th>Recommendation</th> <th>Technical Details</th> <th><code class="language-plaintext highlighter-rouge">missing_data_replace</code> parameter value</th> </tr> </thead> <tbody> <tr> <td>Do not match units with missing values</td> <td>Only use if missing values indicate bad unit</td> <td>Units in the input dataset that have missing data are dropped from the dataset prior to running the algorithms finding the matches</td> <td>1</td> </tr> <tr> <td>Match units with missing values, but ignore missing values</td> <td>Recommended for most cases</td> <td>When pre-processing the input, we place a unique value in place of each missing data point. This will not match any other value, so a unit will only be matched where it’s non-missing covariates match the non-missing covariates of another unit</td> <td>2</td> </tr> <tr> <td>Impute missing values with MICE</td> <td>Not recommended</td> <td>Creates several imputed datasets and iterates over each to find a match according to each dataset. See below for details.</td> <td>3</td> </tr> </tbody> </table></div> <h3 id="missing-values-in-the-holdout-data"> <a href="#missing-values-in-the-holdout-data" class="anchor-heading" aria-labelledby="missing-values-in-the-holdout-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Missing values in the holdout data </h3> <p>The “holdout dataset”, if provided, must have the exact same covariates as the input dataset. It is used when training and fitting a machine learning algorithm to determine the best covariates for predicting the outcome. Matches will always be done on the corresponding covariates, but only on the input dataset.</p> <p>We recommend users set the parameter <code class="language-plaintext highlighter-rouge">missing_data_replace=1</code>, where units with missing values are dropped, and these units are not used in determining the best covariate set for predicting the outcome. This is the fastest option for the algorithm’s runtime. The error of the predictions will vary depending on how large and informative the observed, non-missing dataset is.</p> <p>Users also have the option of imputing their data through any data imputation method of their choice, and then using their imputed dataset as the input data.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Method</th> <th>Recommendation</th> <th>Technical Details</th> <th><code class="language-plaintext highlighter-rouge">missing_holdout_replace</code> parameter value</th> </tr> </thead> <tbody> <tr> <td>Do not match units with missing values</td> <td>Recommended</td> <td>Units in the holdout dataset that have missing data are dropped from the dataset prior to running the algorithms finding the matches</td> <td>1</td> </tr> <tr> <td>Impute missing values with MICE</td> <td>Recommended if interpretability and speed are lower order priorities</td> <td>Creates several imputed holdout datasets. When choosing the best covariate set for predicting the outcome, iterates over each imputed dataset, and averages the predictive error over all datasets</td> <td>2</td> </tr> </tbody> </table></div> <h2 id="further-details-on-mice-imputation"> <a href="#further-details-on-mice-imputation" class="anchor-heading" aria-labelledby="further-details-on-mice-imputation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Further Details on MICE imputation </h2> <p>The built-in imputation method that we include is the “Multiple Imputation by Chained Equations” algorithm. This constructs several imputed datasets. It fills in missing values multiple times, creating multiple “complete” datasets. The error of the imputations, and the consistency of the imputations across imputed datasets, is dependent on how predictive the observed data is of the missing values.</p> <p>The underlying MICE implementation is done using scikit learn’s experimental IterativeImpute package, and relies on DecisionTreeRegressions in the imputation process, to ensure that the data generated is fit for unordered categorical data.</p> <div class="language-markdown highlighter-rouge"> <h4> Further Readings </h4> <br /> For more information on the MICE missing data handling technique, we recommend <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3074241/"> Azur, Melissa J., et al. <i>Multiple imputation by chained equations: what is it and how does it work?</i>. </a> </div> </div> </div> <div class="search-overlay"></div> </div> </body> </html> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
